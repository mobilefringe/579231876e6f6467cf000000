<style>
    .sparkNow{
        margin-top:3%;
        margin-bottom:3%;
    }
    .media-info-container{
        padding: 30px 0px 30px 0px;
        border-top: 1px solid #c2c2c2;
    }
    .media-info-container .media-info-left{
        padding-right: 40px;
        border-right: 1px solid #c2c2c2;
    }
    .media-info-container .media-info-right{
        padding-left: 10px;
        line-height: 1.8em;
    }
    .media-info-container .media-info-right span:nth-of-type(1){
        color:#A0D8D0;
        font-size:15pt;
    }
    .media-info-container .media-info-right .fa{
        color:#A0D8D0;
        width: 1.5em;
    }
    .media-info-container .media-info-right a{
        text-decoration: none;
    }
    
    .media-panel1,.media-panel2,.media-panel3{
        display:inline-block;
    }
    .media-panel1{
        float:left;
    }
    .media-panel2{
        max-width:78%;
    }
    .media-panel3{
        float:right;
    }
    .media-panel3 a{
        width: 30px;
        display: block;
        padding: 15px;
    }
    ul.blogposts{
        margin:0;
    }
    ul.blogposts li:first-child{
        border-top: 1px solid #c2c2c2;
    }
    ul.blogposts li{
        display:inline-block;
        width:100%;
        border-bottom: 1px solid #c2c2c2;
        padding:20px 0px;
    }
    ul.blogposts span{
        display:inline-block; 
    }
    ul.blogposts span.date {
        height: 70px;
        width: 70px;
        padding: 0 0 0 0;
    }
    ul.blogposts span.date .month{
        font-size:15pt;
        padding-top: 19px;
    }
    ul.blogposts span.date .day{
        font-size:15pt;
    }
    ul.blogposts span.title{
        margin: 20px 0 20px 20px;
        text-decoration: none;
        font-size:13pt;
    }
    
    @media only screen and (max-width: 767px) {
        .media-info-container .media-info-left{
            padding:0px;
            border:none;
        }
        .media-info-container .media-info-right{
            padding:20px 0px 0px 0px;
        }
        .media-panel2{
            max-width:60%;
        }
    }
</style>

<!-- begin #page - the container for everything but header -->
<div id="page">	
	<div class="sparkNow">
		<div class="container clearfix">	
			<!-- begin equalHeights columns 3 -->
			<h3 class="short_headline sparkNowTitle"><span>Media</span></h3>
			<div class="row-fluid media-info-container">
			    <div class="span8 media-info-left">
			        <span>
			            For media inquiries, shopping centre information or on-site media coverage, please call or email.
                    <br>
                        Stephanie Schnare, Marketing Director<br>
                        <a href="mailto:sschnare@20vic.com?Subject=Customer%20Service" target="_top">sschnare@20vic.com</a>
                    <br><br>
                        Address:<br>
                        20 Vic Management Inc.<br>
                        Halifax Shopping Centre<br>
                        7001 Mumford Rd.<br>
                        Tower 1, suite 202<br>
                        Halifax , NS<br>
                        B3L 4N9<br>
			        </span>
			    </div>
			    <div class="span4 media-info-right">
			        <span>Contact Us:</span><br>
			        <span><i class="fa fa-envelope-o"></i><a href="mailto:hfxcustomerservice@20vic.com?Subject=Customer%20Service" target="_top">hfxcustomerservice@20vic.com</a></span><br>
			        <span><i class="fa fa-phone"></i>(902) 454-8666</span><br>
			    </div>
			</div>
            <div class="row-fluid equalHero equalHeights" id="main-content">
                <center><img alt="loading" style="width:100px; height:100px;" src="//codecloud.cdn.speedyrails.net/sites/5757295d6e6f647a06080000/image/gif/1488389451000/loading.gif"></center>
			</div>
		</div>
        <script id="blog_tile_template" type="x-tmpl-mustache">
            <div id="tab-latest">
                <ul class="blogposts clearfix">
                    {{#.}}
                        <li> 
                            <div class="media-panel1">
                                <span class="date"> 
                                    <span class="month">{{publish_date_month}}</span> 
                                    <span class="day"><b>{{publish_date_day}}</b></span> 
                                </span>
                            </div>
                            <div class="media-panel2">
                                <span class="title">{{ name }}</span>
                            </div>
                            <div class="media-panel3">
                                <a href="{{photo_url_abs}}" target="_blank" download><img src="//codecloud.cdn.speedyrails.net/sites/5757295d6e6f647a06080000/image/png/undefined/icon_download.png"></a>
                            </div>
                        </li>
                    {{/.}}
                </ul>
            </div>
	    </script>
	</div>
</div>

<script>
$(document).ready(function() {
    function renderPageData(){
        var pathArray = window.location.pathname.split( '/' );
        var category = pathArray[pathArray.length-1];

        renderRepoDetailTemplate('#blog_tile_template', '#main-content',getRepoDetailsByName("pretty-great-media"));
        
        // $('#loading').hide();
        // $('#page_content').fadeIn('fast');
    }
    
    loadMallData(renderPageData);
});

function renderRepoDetailTemplate(blog_template, blog_block, repo){

    var item_list = [];
    var item_rendered = [];
    var blog_template_html = $(blog_template).html();
    Mustache.parse(blog_template_html);   // optional, speeds up future uses
    repo = repo.images;
    console.log(repo);
    $.each( repo, function( index, value ) {
        // MAX # IS 4
        if (index >= 4) {return false;};
    
        var updated_at = new Date(value.updated_at);
        
        var month_names_short = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        value.publish_date_month = month_names_short[updated_at.getMonth()]
        value.publish_date_day = updated_at.getDate()
    
        item_list.push(value);
    });
        
    item_list.sort(function(a, b){
        if(a.updated_at > b.updated_at) return -1;
        if(a.updated_at < b.updated_at) return 1;
        return 0;
    });

    var blog_rendered = Mustache.render(blog_template_html,item_list);
    item_rendered.push(blog_rendered);
    $(blog_block).html(item_rendered.join(''));
}


</script>