<div class="blog_banner">
    <div class="main_container">
        <h2>Contest Ballot</h2>
    </div>
</div>
<div class="main_container margin_30">
    <div id="send_contact_success" class="alert alert-success" role="alert" v-show="formSuccess">
                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                        <span class="sr-only">Success</span>
                        Thank you for contacting us. A member from our team will contact you shortly.
                    </div>
                    <div id="send_contact_error" class="alert alert-danger" role="alert" v-show="formError">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        <span class="sr-only">Error:</span>
                        There was an error when trying to submit your request. Please try again later.
                    </div>
    <div id="contest_details_container">
        <script id="contest_details_template" type="x-tmpl-mustache/text">
            <img src="//www.mallmaverick.com/{{photo_url}}" class="full_width margin_30">
            <div>{{{rich_description}}}</div>
        </script>
    </div>
    <hr>
    <div class="row">        
        <form accept-charset="UTF-8" enctype="multipart/form-data" id="contest_form_20vic" method="post">
            <!-- hidden fields to get property an contest id -->
            <input id="propert_id" name="contest[property_id]" style="display:none" value="{{site.property.id}}" />
            <input id="contest_id" name="contest[contest_id]" style="display:none" value="{{contest.id}}" />
            <input id="cm-name" name="cm-name" type="hidden" value="" />
            <!-- hidden fields END -->
            
            <div class="row">
                <div class="col-md-3">
                    <label>*First Name</label>
                    <input required type="text" class="contest_info" id="first_name" name="contest[first_name]" value="" />
                </div>
                <div class="col-md-3">
                    <label>*Last Name</label>
                    <input required type="text" class="contest_info" id="last_name" name="contest[last_name]" value=""/>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <label for="address">Address</label>
                    <input id="address" name="cm-f-dhyhid" type="text" class="contest_info" value=""/>
                </div>
                <div class="col-md-3">
                    <label for="city">City</label>
                    <input  id="city" name="cm-f-dhyhih" type="text" class="contest_info" value=""/>
                </div>
                <div class="col-md-3">
                    <label for="province">Province</label>
                    <input id="province" name="cm-f-jyydiu" type="text" class="contest_info" value="Ontario"/>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <label for="postal_code">*Postal Code</label>
                    <input required id="postal_code" name="cm-f-jyydik" type="text" class="contest_info" value=""/>
                </div>
                <div class="col-md-3">
                    <label for="phone">*Telephone</label>
                    <input required id="phone" name="cm-f-dhyhik" type="text" class="contest_info" value=""/>
                </div>
                <div class="col-md-6">
                    <label for="email">*Email</label>
                    <input required id="email" name="cm-tudie-tudie" type="email" class="contest_info" value=""/>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 contest_checkbox" style="display:table">
                    <input required style="display:table-cell;margin-top: -2px;width: 24px;" class="info_check" id="listyuhhly" name="cm-ol-yuhhly" type="checkbox"/><span  style="display:table-cell"> I consent to receiving by e-mail, or other form of electronic contact, commercial electronic messages ("CEMs") from the Contest Sponsors (as defined in the Contest Rules). I understand that I can withdraw my consent to receiving CEMs from the Contest Sponsors at any time by e-mail at <br><a href="mailto:casladministrator-ptc@20vic.com" target="_top" style="color:blue;">casladministrator-ptc@20vic.com</a> <a href="/pages/ptc-privacy-policy" style="text-decoration:underline;"  target="_blank">Privacy Policy.</a></span>
                    <br>
                </div>
                <div class="col-md-6 contest_checkbox" style="display:table">
                    <input required style="display:table-cell;margin-top: -2px;width: 24px;" type="checkbox" class="info_check" id="agree_terms" />
                    <span style="display:table-cell">I have read and am in full compliance with the official contest <a href="/pages/ptc-contest-rules-and-regulations" style="text-decoration:underline;"  target="_blank">rules and regulations.</a></span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 contest_checkbox" style="display:table">
                    <input style="display:table-cell;margin-top: -2px;width: 24px;" class="info_check" id="retail_check" value="true" name="cm-f-odrddd" type="checkbox"/>
                    <span  style="display:table-cell">Yes, I consent to receiving emails, or other forms of electronic contact, commercial messages ("CEMs") from this retail sponsor.</span>
                    <br>
                </div>
            </div>
            <div class="row" style="display:none;">
                <input id="fieldjlvji" name="cm-f-jlvji" type="text" />
            </div>
            <br/>
            <input class="btn btn-primary" name="commit" type="submit" value="Submit" style="width: 130px;float:right;height: 35px;">
            <br/>
        </form>
    </div>
</div>

<script>
    $(document).ready(function(e){
        init(e);
        loadMallDataCached(renderPage);
        
        function renderPage(){
            var contests = getContestList();
            var current_contest = [];
            $.each(contests, function(key, val){
                if(val.show_on_slug === "ptc-contest-ballot") {
                    current_contest.push(val);
                } 
            });
            renderGeneral("#contest_details_container", '#contest_details_template', current_contest);
            var slug = "ptc-contest-ballot";
            $('#contest_form_20vic').submit(function(e){
                e.preventDefault();
                $('.btn-primary').prop('disabled', true);
                submit_contest(slug);
                $('html, body').animate({scrollTop : 0},800);
            });
            
            show_content();
        }
    });

    function validateForm() {
        var str1 = $("#first_name").val();
        var str2 = $("#last_name").val();
        var fullname = str1+" "+str2;
        $("#cm-name").attr('value', fullname);
        $("#fieldjlvji").attr('value', "Contest Jan 2015");

        if ($("#first_name").val() == ""){
            alert("Please Enter First Name");
            $("#first_name").focus();
            return false;
        } else if ($("#last_name").val() == ""){
            alert("Please Enter Last Name");
            $("#last_name").focus();
            return false;
        } else if ($("#fieldzdytd").val() == ""){
            alert("Please Enter Phone Number");
            $("#fieldzdytd").focus();
            return false;
        } else if ($("#fieldzdyti").val() == ""){
            alert("Please Enter Postal Code");
            $("#fieldzdyti").focus();
            return false;
        } else if ($("#fieldEmail").val() == ""){
            alert("Please Enter Email");
            $("#fieldEmail").focus();
            return false;
        }else if ($("#agree_terms").prop("checked") != true){
            alert("Please agree to the term and conditions before submitting the contest.");
            $("#agree_terms").focus();
            return false;
        } else{
        }
    }
</script>